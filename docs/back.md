# 仕様書（バックエンド）
## 概要
- 入力されたお題からワードウルフ用の単語ペアを作成する。
- AIはサーバー側のみ使用
- フロントエンドからはAPIを呼び出すだけで利用できる
## エンドポイント
    POST /api/generate-word
## 入力
    {
    "theme": "string（必須、1〜20文字）"
    }
## 入力制約
    - themeが存在しない、または空文字の場合は失敗
    - 20文字以上の場合は失敗
    - 日本語を想定
## 入力時エラー
    - 失敗時はAIを呼び出さずフォールバックを使用
## 出力（成功）
    {
    "citizenWord": "string",
    "wolfWord": "string"
    }
## 出力制約
- 両方とも名詞
- citizenWordとwolfWordは明確に異なる必要がある
- 入力されたジャンルに沿ったワードにする
- 日本語
## 禁止事項 
- 同一単語や似た意味の単語
- 上位下位概念（例：犬、動物）
- 日本語以外の言語
- 説明文・補足分を含めること
## プロンプト（固定）
    あなたはワードウルフ用の単語生成AIです。
    以下の条件を厳守してください。

    ・テーマに沿った名詞を2つ生成する
    ・1つ目は市民用、2つ目はウルフ用
    ・同一ジャンルだが明確に異なる単語
    ・日本語のみ
    ・出力はJSONのみ

    出力形式：
    {
    "citizenWord": "",
    "wolfWord": ""
    }

    テーマ：{theme}
## 失敗時使用
- 以下の場合は生成が失敗したと判断する
    - jsonで出力されていないとき
    - citizenWordとwolfWordの片方しか出力されていない
    - citizenWordとwolfWordが同一単語
    - AI,APIのタイムアウト,エラー
## 失敗時の対応
    事前定義ワードペア配列からランダムに1組を返す
    フォールバック時もレスポンス形式は成功時と同様
## フォールバックワード
    - 事前定義ワードは10個
    - themeと一致しなくてもよい
    - 日本語、名刺とする
## レスポンス
    - 成功時：HTTP 200
    - フォールバック使用時もHTTP 200とする
    - エラー情報はレスポンスに含まない
## AI利用仕様
    - AI APIキーは環境変数から取得
    - サーバーコード内に直接記述
    - タイムアウトやAPIエラー時は失敗扱いとする


    


